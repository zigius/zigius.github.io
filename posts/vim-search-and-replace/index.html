<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>Vim Search and Replace | zlog - the zigius blog</title><meta name=viewport content="width=device-width,minimum-scale=1"><meta name=description content="Search and replace text in Vim buffers To search and replace text in Vim using regexes you can use one of the following options:
Using normal mode :%g/Page \d\+/#\d\+ Highlight/norm! ^f#r Normal search and replace :%s/\(Page \d\+\) \(#\d\+ Highlight\)/\1\r\2/g Vim very magic mode :%s/\v(Page \d+) (#\d+ Highlight)/\1\r\2/g I personally like the third option as it is the easiest to use. The second option using normal search and replace might be the most obvious, but adds a lot of clutter."><meta name=generator content="Hugo 0.111.3"><meta name=robots content="noindex, nofollow"><link rel=stylesheet href=/ananke/css/main.min.css><meta property="og:title" content="Vim Search and Replace"><meta property="og:description" content="Search and replace text in Vim buffers To search and replace text in Vim using regexes you can use one of the following options:
Using normal mode :%g/Page \d\+/#\d\+ Highlight/norm! ^f#r Normal search and replace :%s/\(Page \d\+\) \(#\d\+ Highlight\)/\1\r\2/g Vim very magic mode :%s/\v(Page \d+) (#\d+ Highlight)/\1\r\2/g I personally like the third option as it is the easiest to use. The second option using normal search and replace might be the most obvious, but adds a lot of clutter."><meta property="og:type" content="article"><meta property="og:url" content="https://zigius.github.io/posts/vim-search-and-replace/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-05-07T17:41:39+03:00"><meta property="article:modified_time" content="2023-05-07T17:41:39+03:00"><meta itemprop=name content="Vim Search and Replace"><meta itemprop=description content="Search and replace text in Vim buffers To search and replace text in Vim using regexes you can use one of the following options:
Using normal mode :%g/Page \d\+/#\d\+ Highlight/norm! ^f#r Normal search and replace :%s/\(Page \d\+\) \(#\d\+ Highlight\)/\1\r\2/g Vim very magic mode :%s/\v(Page \d+) (#\d+ Highlight)/\1\r\2/g I personally like the third option as it is the easiest to use. The second option using normal search and replace might be the most obvious, but adds a lot of clutter."><meta itemprop=datePublished content="2023-05-07T17:41:39+03:00"><meta itemprop=dateModified content="2023-05-07T17:41:39+03:00"><meta itemprop=wordCount content="710"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="Vim Search and Replace"><meta name=twitter:description content="Search and replace text in Vim buffers To search and replace text in Vim using regexes you can use one of the following options:
Using normal mode :%g/Page \d\+/#\d\+ Highlight/norm! ^f#r Normal search and replace :%s/\(Page \d\+\) \(#\d\+ Highlight\)/\1\r\2/g Vim very magic mode :%s/\v(Page \d+) (#\d+ Highlight)/\1\r\2/g I personally like the third option as it is the easiest to use. The second option using normal search and replace might be the most obvious, but adds a lot of clutter."></head><body class="ma0 avenir bg-near-white"><header><div class=bg-black><nav class="pv3 ph3 ph4-ns" role=navigation><div class="flex-l justify-between items-center center"><a href=/ class="f3 fw2 hover-white no-underline white-90 dib">zlog - the zigius blog</a><div class="flex-l items-center"><div class=ananke-socials></div></div></div></nav></div></header><main class=pb7 role=main><article class="flex-l flex-wrap justify-between mw8 center ph3"><header class="mt4 w-100"><aside class="instapaper_ignoref b helvetica tracked">POSTS</aside><div id=sharing class="mt3 ananke-socials"></div><h1 class="f1 athelas mt3 mb1">Vim Search and Replace</h1><time class="f6 mv4 dib tracked" datetime=2023-05-07T17:41:39+03:00>May 7, 2023</time></header><div class="nested-copy-line-height lh-copy serif f4 nested-links mid-gray pr4-l w-two-thirds-l"><h1 id=search-and-replace-text-in-vim-buffers>Search and replace text in Vim buffers</h1><p>To search and replace text in Vim using regexes you can use one of the following
options:</p><ol><li>Using normal mode</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span><span style=color:#e6db74>:%</span>g<span style=color:#f92672>/</span><span style=color:#66d9ef>Page</span> \d\<span style=color:#f92672>+/</span><span style=color:#75715e>#\d\+ Highlight/norm! ^f#r</span>
</span></span></code></pre></div><ol start=2><li>Normal search and replace</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span><span style=color:#e6db74>:%</span>s<span style=color:#f92672>/</span>\(<span style=color:#66d9ef>Page</span> \d\<span style=color:#f92672>+</span>\) \(<span style=color:#75715e>#\d\+ Highlight\)/\1\r\2/g</span>
</span></span></code></pre></div><ol start=3><li>Vim very magic mode</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span><span style=color:#e6db74>:%</span>s<span style=color:#f92672>/</span>\v(<span style=color:#66d9ef>Page</span> \d<span style=color:#f92672>+</span>) (<span style=color:#75715e>#\d+ Highlight)/\1\r\2/g</span>
</span></span></code></pre></div><p>I personally like the third option as it is the easiest to use.
The second option using normal search and replace might be the most obvious, but
adds a lot of clutter. The first option using normal mode might be the most
powerful but I feel like it will take time mastering and has a steeper learning
curve.</p><p>Example text:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-markdown data-lang=markdown><span style=display:flex><span>Page 66 #1 Highlight
</span></span><span style=display:flex><span>With a Second Brain as a shield against the media storm, we no longer have to react to each idea immediately, or risk losing it forever. 
</span></span><span style=display:flex><span>We can set things aside and get to them later when we are calmer and more grounded
</span></span></code></pre></div><p>Will be replaced with:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-markdown data-lang=markdown><span style=display:flex><span>Page 66
</span></span><span style=display:flex><span>#1 Highlight
</span></span><span style=display:flex><span>With a Second Brain as a shield against the media storm, we no longer have to react to each idea immediately, or risk losing it forever. 
</span></span><span style=display:flex><span>We can set things aside and get to them later when we are calmer and more grounded
</span></span></code></pre></div><h2 id=extended-explanation-of-commands>Extended explanation of commands</h2><h3 id=first-command-using-normal-mode>first command using normal mode</h3><p>Let&rsquo;s break down this command:</p><ul><li><code>%</code>: Specifies that the global command should be run on the entire buffer.</li><li>g: Starts the global command.</li><li><code>/Page \d\+/#\d\+ Highlight/</code>: Specifies a regular expression pattern to search for.
This pattern matches the text &ldquo;Page&rdquo;, followed by one or more digits (\d+),
followed by the &ldquo;#&rdquo; symbol, followed by one or more digits (\d+), followed by the text &ldquo;Highlight&rdquo;.</li><li><code>norm! ^f#r</code>: Specifies a normal mode command to execute on each matching line.
This command moves the cursor to the beginning of the line (^),
searches forward for the &ldquo;#&rdquo; symbol (f#), and replaces it with a newline character (r).</li></ul><h3 id=second-command-search-and-replace>second command search and replace</h3><p>This command uses Vim&rsquo;s substitute command (:s) to replace each matching pattern with two lines. Here&rsquo;s how it works:</p><ul><li>%: Specifies that the substitute command should be run on the entire buffer.</li><li>s: Starts the substitute command.</li><li><code>/\(Page \d\+\) #\(\d\+ Highlight\)/</code>: Specifies a regular expression pattern to search for.
This pattern matches the text &ldquo;Page&rdquo;, followed by one or more digits (\d+), followed by the &ldquo;#&rdquo; symbol,
followed by one or more digits (\d+), followed by the text &ldquo;Highlight&rdquo;.
The ( and ) characters are used to capture groups of text, which can be referenced in the replacement text.</li><li>/\1\r\2/g: Specifies the replacement text. This text contains two captured
groups (\1 and \2) separated by a newline character (\r).</li></ul><p>After running this command, each line in the buffer that matches the specified pattern will
be split into two lines, just like in the previous solution. The first line will contain the
text &ldquo;Page&rdquo; followed by the page number, and the second line will contain the highlight number and text &ldquo;Highlight&rdquo;.</p><h3 id=third-command-very-magic-mode>third command very magic mode</h3><p>You can use the &ldquo;very magic&rdquo; mode in Vim&rsquo;s regular expressions to avoid the need to escape most special characters, including the parentheses.</p><p>Here&rsquo;s a command that uses &ldquo;very magic&rdquo; mode:</p><pre tabindex=0><code>:%s/\v(Page \d+) #(\d+ Highlight)/\1\r\2/g
</code></pre><p>In this command, the <code>\v</code> sequence at the beginning of the pattern tells Vim to enter &ldquo;very magic&rdquo; mode. In this mode, most special characters, including parentheses, don&rsquo;t need to be escaped.</p><p>The regular expression pattern itself matches the same text as before: &ldquo;Page &ldquo;, followed by one or more digits (denoted by <code>\d+</code>), followed by a space, a &ldquo;#&rdquo; symbol, one or more digits, another space, and the word &ldquo;Highlight&rdquo;. The capture groups are denoted by the parentheses, but they don&rsquo;t need to be escaped in &ldquo;very magic&rdquo; mode.</p><p>The rest of the command is the same as before. It replaces each match with the first capture group (<code>\1</code>), a newline character (<code>\r</code>), and the second capture group (<code>\2</code>).</p><p>In Markdown format, the command would look like this:</p><pre tabindex=0><code>:%s/\v(Page \d+) #(\d+ Highlight)/\1\r\2/g
</code></pre><p>There are of course a lot of other ways you can modify text in vim, those are just some of the methods I wanted to cover..
If you can think of A better option to achieve the same result please let me know :)</p><ul class=pa0></ul><div class="mt6 instapaper_ignoref"></div></div><aside class="w-30-l mt6-l"></aside></article></main><footer class="bg-black bottom-0 w-100 pa3" role=contentinfo><div class="flex justify-between"><a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href=https://zigius.github.io/>&copy; zlog - the zigius blog 2023</a><div><div class=ananke-socials></div></div></div></footer></body></html>